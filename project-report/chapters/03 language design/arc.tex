\section{Parser generator v.2 arc}\label{sec:parsergeneratorarc}

Parser grammar
\begin{align*}
    start                   & \to \text{setup declarations}                                                                                     \\
    declarations            & \to \text{declaration declarations}                                                                               \\
    setup                   & \to \text{setup '\{' setupDeclaration '\{'}                                                                       \\
                            & \mid \epsilon                                                                                                     \\
    setupDeclaration        & \to \text{declaration ';' setupDeclaration}                                                                       \\
                            & \mid \text{functionCall ';' setupDeclaration}                                                                     \\
                            & \mid \epsilon                                                                                                     \\
    statements              & \mid \text{returnStatement statements}                                                                            \\
                            & \mid \text{ifStatement statements}                                                                                \\
                            & \mid \text{forLoop statements}                                                                                    \\
                            & \mid \text{whileLoop statements}                                                                                  \\
                            & \mid \text{whenStatement statements}                                                                              \\
                            & \mid \text{variableDeclaration statements}                                                                        \\
                            & \mid \text{assigmentStatement}                                                                                    \\
                            & \mid \epsilon                                                                                                     \\
    assignmentStatement     & \to \text{IDENTIFIER ('[' NUMBER ']')? '=' ('[' (expression (',' expression)*)? ']'} \mid  \text{expression) ';'} \\
    returnStatement         & \to \text{'return' expression}                                                                                    \\
    ifStatement             & \to \text{'if' '(' logicalExpression ')' '{' statements '}' else}                                                 \\
    else                    & \to \text{'else' '\{' statements '\}'}                                                                            \\
    forLoop                 & \to \text{'for' '(' parameterDeclaration 'in' IDENTIFIER ')' '\{' statements '\}'}                                \\
    whileLoop               & \to \text{'while' '(' expression ')' '\{' statements '\}'}                                                        \\
    whenStatement           & \to \text{'when' '(' IDENTIFIER ')' '\{' whenCase+ else '\}'}                                                     \\
    whenCase                & \to \text{expression '=>' '\{' statements '\}'}                                                                   \\
    expression              & \to \text{(NUMBER} \mid \text{IDENTIFIER} \mid \text{BOOL)}                                                       \\
                            & \mid \text{(functionCall} \mid \text{IDENTIFIER '[' NUMBER ']')}                                                  \\
                            & \mid \text{'(' expression ')'}                                                                                    \\
                            & \mid \text{'not' expression}                                                                                      \\
                            & \mid \text{expression (MULTI} \mid \text{DIVI) expression}                                                        \\
                            & \mid \text{expression (PLUS} \mid \text{MINUS) expression}                                                        \\
                            & \mid \text{expression RELATIONEQOPERATORS expression}                                                             \\
                            & \mid \text{expression RELATIONOPERATORS expression}                                                               \\
                            & \mid \text{expression 'and' expression}                                                                           \\
                            & \mid \text{expression 'or' expression;}                                                                           \\
    functionCall            & \to \text{IDENTIFIER '(' expression (',' expression)* ')'}                                                        \\
    declaration             & \to \text{functionDeclaration}                                                                                    \\
                            & \mid \text{variableDeclaration}                                                                                   \\
    functionDeclaration     & \to \text{typeOf IDENTIFIER '(' (parameterDeclaration ( ',' parameterDeclaration)*)? ')' '\{' statements '\}'}    \\
    variableDeclaration     & \to \text{typeOf IDENTIFIER '=' ('[' (expression (',' expression)*)? ']'} \mid \text{expression) ';'}             \\
    typeOf                  & \to \text{TYPE\_TYPEOPERATOR}                                                                                  
    parameterDeclaration    & \to \text{typeOf IDENTIFIER}
\end{align*}

Lexical grammar
\begin{align*}
    WS                      & \to \text{[}\backslash \text{t} \backslash \text{n} \backslash \text{r]+ -> skip}     \\
    NUMBER                  & \to \text{'-'? DIGIT+ ('.'DIGIT+)?}                                                   \\
    fragment DIGIT          & \to \text{[0-9]}                                                                      \\
    BOOL                    & \to \text{'true'} \mid \text{'false'}                                                 \\
    TYPE_TYPEOPERATOR       & \to \text{TYPE ( TYPEOPERATOR)*}                                                      \\
    fragment TYPEOPERATOR   & \to \text{'[' ']'}                                                                    \\
    fragment TYPE           & \to \text{'num'}                                                                      \\
                            & \mid \text{'text'}                                                                    \\
                            & \mid \text{'bool'}                                                                    \\
                            & \mid \text{'char'}                                                                    \\
    COMMENTS                & \to \text{'//' .*? '} \backslash \text{n' -> skip}                                    \\
    LINECOMMENTS            & \to \text{'/*' .*? '*/' -> skip}                                                      \\
    RETURN                  & \to \text{'return'}                                                                   \\
    WHILE                   & \to \text{'while'}                                                                    \\
    IT                      & \to \text{'it'}                                                                       \\
    FOR                     & \to \text{'for'}                                                                      \\
    IN                      & \to \text{'in'}                                                                       \\
    WHEN                    & \to \text{'when'}                                                                     \\
    VOID                    & \to \text{'void'}                                                                     \\
    ARDUINO                 & \to \text{'arduino'}                                                                  \\
    SETUP                   & \to \text{'setup'}                                                                    \\
    ELSE                    & \to \text{'else'}                                                                     \\
    DEFINE                  & \to \text{'define'}                                                                   \\
    MULTI                   & \to \text{'*'}                                                                        \\
    DIVI                    & \to \text{'/'}                                                                        \\
    PLUS                    & \to \text{'+'}                                                                        \\
    MINUS                   & \to \text{'-'}                                                                        \\
    RELATIONEQOPERATIONS    & \to \text{'=='}                                                                       \\
                            & \mid \text{'!='}                                                                      \\
    RELATIONOPERATORS       & \to \text{'<'}                                                                        \\
                            & \mid \text{'>'}                                                                       \\
                            & \mid \text{'<='}                                                                      \\
                            & \mid \text{'>='}                                                                      \\
    AND                     & \to \text{'and'}                                                                      \\
    OR                      & \to \text{'or'}                                                                       \\
    NOT                     & \to \text{'not'}                                                                      \\
    XOR                     & \to \text{'xor'}                                                                      \\
    IDENTIFIER              & \to \text{ALPHA(DIGIT} \mid \text{ ALPHA)*}                                           \\
    ASSIGMENT               & \to \text{'='}                                                                        \\
    SEPERATOR               & \to \text{','}                                                                        \\
    fragment ALPHA          & \to \text{[a-z] | [A-Z] | '\_'}
\end{align*}